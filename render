#!/bin/bash
# Deployment script for Ready Tech to GitHub/Render

echo "Ready Tech Deployment Script"
echo "==========================="
echo

# Check if git is installed
if ! command -v git &> /dev/null; then
    echo "Git is not installed. Please install git first."
    exit 1
fi

# Check if this is a git repository
if [ ! -d .git ]; then
    echo "This is not a git repository. Initializing..."
    git init
fi

# Add all necessary files
echo "Adding essential files to git..."
git add app_new.py models_new.py config.py
git add templates/ static/
git add requirements.txt Procfile runtime.txt DEPLOYMENT_GUIDE.md
git add gunicorn_config.py

# Commit changes
echo "Committing changes..."
git commit -m "Prepare for deployment to Render"

# Push to GitHub
echo
echo "Ready to push to GitHub."
echo "Please ensure you have connected your local repository to GitHub with:"
echo "  git remote add origin YOUR_GITHUB_REPO_URL"
echo
read -p "Push to GitHub now? (y/n): " PUSH_CHOICE

if [[ $PUSH_CHOICE == "y" || $PUSH_CHOICE == "Y" ]]; then
    echo "Pushing to GitHub..."
    git push -u origin main || git push -u origin master
    
    echo
    echo "Files pushed to GitHub."
    echo
    echo "Now you can deploy on Render.com:"
    echo "1. Create a new Web Service in Render"
    echo "2. Connect your GitHub repository"
    echo "3. Configure as specified in DEPLOYMENT_GUIDE.md"
else
    echo
    echo "Not pushing to GitHub."
    echo "You can push manually with: git push -u origin main"
fi

echo
echo "Deployment preparation complete!"
